<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Заказы</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="page">
    <div class="nav">
        <a href="/" class="button">Главная</a>
        <a href="/orders" class="button">Мои заказы</a>
        <a href="/orders/new" class="button">Бронирование</a>
        <a href="/orders/admin/all" class="button" id="btn-admin-orders" th:if="${isAdmin}">Все заказы</a>
        <div id="session-info"></div>
        <a href="#" class="button" id="logout-btn">Выйти</a>
    </div>

    <div class="card">
        <h1 th:text="${isAdmin} ? 'Все заказы' : 'Мои заказы'"></h1>
        <table>
            <thead>
            <tr>
                <th>№</th>
                <th>Клиент (паспорт)</th>
                <th>Номер</th>
                <th>Класс</th>
                <th>Даты</th>
                <th>Гостей</th>
                <th>Сумма</th>
                <th>Оплата</th>
                <th th:if="${isAdmin}">Действия</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${orders}">
                <td th:text="${order.orderNumber}"></td>
                <td th:text="${order.clientPassportNumber}"></td>
                <td th:text="${order.roomNumber}"></td>
                <td th:text="${order.roomClass}"></td>
                <td>
                    <span th:text="${order.checkInDate}"></span>
                    –
                    <span th:text="${order.checkOutDate}"></span>
                </td>
                <td th:text="${order.guestsCount}"></td>
                <td th:text="${order.totalCost}"></td>
                <td th:text="${order.paymentStatus}"></td>
                <td th:if="${isAdmin}">
                    <form th:action="@{'/orders/' + ${order.orderNumber} + '/paid'}" method="post" style="display:inline">
                        <button type="submit" th:if="${order.paymentStatus != 'PAID'}">Отметить оплату</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script src="/js/app.js"></script>
</body>
</html>


